{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Global Temperature Change",
  "width": 800,
  "height": 600,
  "projection": {"type": "equalEarth"},

  "data": {
    "url": "https://raw.githubusercontent.com/magnuswmf/FIT3179_Assignemtn_2/main/global.geo.json" , "format": {"type": "topojson", "feature": "global.geo"}},

  "params": [{"name": "choose_year",
    "value": 2016,
    "bind":{
      "input": "range",
      "min": 1961,
      "max": 2019,
      "step": 1,
      "name": "Choose Year"
    }
  }
  ],



  "transform": [

    {"lookup": "properties.name",
      "from":{"data":{
        "url": "https://raw.githubusercontent.com/magnuswmf/FIT3179_Assignemtn_2/main/Data/Temperature_change_Data.csv"},
        "key": "Country Name",
        "fields":["tem_change","year"]
      }

    },

    {"filter": "datum.year > 2000"}

  ],


  "mark": {"type": "geoshape"},
  "encoding": {"color":{"field":"tem_change","type":"quantitative","scale": {"domain":[-1,1],"domainMid": 0, "range": ["#00a2ff","#ebebeb","#ff0000"]}},

    "tooltip": [{"field": "year", "type": "ordinal"},
      {"field": "properties.name", "title":"Country"},
      {"field": "tem_change", "title": "Change in Temperature"} ]


  }

}